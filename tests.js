const test = require('tape');
const postcss = require('postcss');
const plugin = require('./');
const name = require('./package.json').name; // eslint-disable-line prefer-destructuring

const tests = [
  {
    message: 'should match url without quote marks',
    actual: 'a { background: url(image.jpg) }',
    expected: 'a { background: url("/app-background/image.jpg") }',
  },
  {
    message: 'should match url with variable',
    actual: 'li { --foo: url("image.jpg") }',
    expected: 'li { --foo: url("/app---foo/image.jpg") }',
  },
  {
    message: 'should match url with single quote marks',
    actual: "a { cursor: url('image.jpg') }",
    expected: 'a { cursor: url("/app-cursor/image.jpg") }',
  },
  {
    message: 'should match url with double quote marks',
    actual: 'li { list-style-image: url("image.jpg") }',
    expected: 'li { list-style-image: url("/app-list-style-image/image.jpg") }',
  },
  {
    message: 'should not match data uri without quote marks',
    actual: 'strike::after { content: url(data:image/gif;base64,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) }',
    expected: 'strike::after { content: url(data:image/gif;base64,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) }',
  },
  {
    message: 'should not match data uri with single quote marks',
    actual: "em { background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAuBAMAAABZgh3OAAAAKlBMVEX/AP9zc4T/96X////elADFIRnmWkJCQkopKSn35lL3vSGcUgBjMQgAAACaqNGNAAAAAXRSTlMAQObYZgAAAcJJREFUKJGNkzFPwkAUx29gMGlvdu/mV3AkLEUYWXBn0NGhxsTETQbdiOQVuuHQB00YjLFeSBhMjBiTDgxQ6Hfx3V3vIJHBS+7y7pf/3f/1vR5jnB0Yq+zf8PEv492D8OEAvJ+Y8Kh7Z+ANznXUvQ+uS1OOJRRxPwj2oCMEEwD94NbctEBR9eAMAI4Dm/JiVPW8E2IQFLR1phK6vud5kkWSsXQgV0eCJIezrNxJ6UdO8GoFkbrM1/DnlGBxrWGFYnn+cz305XEZV/wSvqXyUuj06BtUSNAFGL4APHXamfaUl7oXve+W8J9bBFML2zhunaOC73sQXy8RW5g5iOojyOhdQ8SMIqJRpss0llucq1UxCfWIXFoSXSgeahZHVMXEVBk0JQMXp6ZJIGlduS5MEytAOfcolSHjdQPX4GsI2dI0keAApDiGba3eKI2WGoZ+uKw1SiHb0FnCAwiLmu3mhnSRT1pMNjObUUo9X9PEhItS6sCAXGiGpDQw1zWEMMTJd1Eez2MN4xjRMJaryoZISrTmDtph/95dORGbFrICR81iS2y0ezvuh5CJbEVtthN+pQ1l6uJ4p+SFLgJfpweeHrdZsl8kRDvshdvXtgAAAABJRU5ErkJggg==') }",
    expected: "em { background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAuBAMAAABZgh3OAAAAKlBMVEX/AP9zc4T/96X////elADFIRnmWkJCQkopKSn35lL3vSGcUgBjMQgAAACaqNGNAAAAAXRSTlMAQObYZgAAAcJJREFUKJGNkzFPwkAUx29gMGlvdu/mV3AkLEUYWXBn0NGhxsTETQbdiOQVuuHQB00YjLFeSBhMjBiTDgxQ6Hfx3V3vIJHBS+7y7pf/3f/1vR5jnB0Yq+zf8PEv492D8OEAvJ+Y8Kh7Z+ANznXUvQ+uS1OOJRRxPwj2oCMEEwD94NbctEBR9eAMAI4Dm/JiVPW8E2IQFLR1phK6vud5kkWSsXQgV0eCJIezrNxJ6UdO8GoFkbrM1/DnlGBxrWGFYnn+cz305XEZV/wSvqXyUuj06BtUSNAFGL4APHXamfaUl7oXve+W8J9bBFML2zhunaOC73sQXy8RW5g5iOojyOhdQ8SMIqJRpss0llucq1UxCfWIXFoSXSgeahZHVMXEVBk0JQMXp6ZJIGlduS5MEytAOfcolSHjdQPX4GsI2dI0keAApDiGba3eKI2WGoZ+uKw1SiHb0FnCAwiLmu3mhnSRT1pMNjObUUo9X9PEhItS6sCAXGiGpDQw1zWEMMTJd1Eez2MN4xjRMJaryoZISrTmDtph/95dORGbFrICR81iS2y0ezvuh5CJbEVtthN+pQ1l6uJ4p+SFLgJfpweeHrdZsl8kRDvshdvXtgAAAABJRU5ErkJggg==') }",
  },
  {
    message: 'should not match data uri with double quote marks',
    actual: 'table { background: url("data:image/jpeg;base64,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") }',
    expected: 'table { background: url("data:image/jpeg;base64,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") }',
  },
  {
    message: 'should match url in @import when atRules: true',
    actual: '@import url(funny-little-kittens.css)',
    expected: '@import url("/app-import/funny-little-kittens.css")',
    options: { atRules: true },
  },
  {
    message: 'should not match url in @import when atRules: false (default value)',
    actual: '@import url(nude-big-boobs.css)',
    expected: '@import url(nude-big-boobs.css)',
  },
];

const process = (css, mapfunc, options) => postcss(plugin(mapfunc, options)).process(css).css;
const urlMapper = (url, type) => `/app-${type}/${url}`;

test(name, (t) => {
  t.plan(tests.length);

  tests.forEach(x => t.equal(process(x.actual, urlMapper, x.options), x.expected, x.message));
});

test('should use the postcss plugin api', (t) => {
  t.plan(2);

  t.ok(plugin().postcssVersion, 'should be able to access version');
  t.equal(plugin().postcssPlugin, name, 'should be able to access name');
});
